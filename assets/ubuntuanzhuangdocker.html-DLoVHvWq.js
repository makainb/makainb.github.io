import{_ as n,c as a,a as e,o as l}from"./app-BZ33XHo8.js";const i={};function c(p,s){return l(),a("div",null,s[0]||(s[0]=[e(`<h2 id="安装前准备" tabindex="-1"><a class="header-anchor" href="#安装前准备"><span>安装前准备</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment">#安装前先卸载操作系统默认安装的docker，</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">apt-get</span> remove <span class="token function">docker</span> docker-engine docker.io containerd runc</span>
<span class="line"></span>
<span class="line"><span class="token comment">#安装必要支持</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> apt-transport-https ca-certificates <span class="token function">curl</span> software-properties-common gnupg lsb-release</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 一定要用root帐号，可以看ubuntu切换root</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="开始安装" tabindex="-1"><a class="header-anchor" href="#开始安装"><span>开始安装</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment">#添加 Docker 官方 GPG key （可能国内现在访问会存在问题）</span></span>
<span class="line"><span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> https://download.docker.com/linux/ubuntu/gpg <span class="token operator">|</span> <span class="token function">sudo</span> gpg <span class="token parameter variable">--dearmor</span> <span class="token parameter variable">-o</span> /usr/share/keyrings/docker-archive-keyring.gpg</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 阿里源（推荐使用阿里的gpg KEY）</span></span>
<span class="line"><span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg <span class="token operator">|</span> <span class="token function">sudo</span> gpg <span class="token parameter variable">--dearmor</span> <span class="token parameter variable">-o</span> /usr/share/keyrings/docker-archive-keyring.gpg</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment">#添加 apt 源:</span></span>
<span class="line"><span class="token comment">#Docker官方源</span></span>
<span class="line"><span class="token builtin class-name">echo</span> <span class="token string">&quot;deb [arch=<span class="token variable"><span class="token variable">$(</span>dpkg --print-architecture<span class="token variable">)</span></span> signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu <span class="token variable"><span class="token variable">$(</span>lsb_release <span class="token parameter variable">-cs</span><span class="token variable">)</span></span> stable&quot;</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/apt/sources.list.d/docker.list <span class="token operator">&gt;</span> /dev/null</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment">#阿里apt源</span></span>
<span class="line"><span class="token builtin class-name">echo</span> <span class="token string">&quot;deb [arch=<span class="token variable"><span class="token variable">$(</span>dpkg --print-architecture<span class="token variable">)</span></span> signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://mirrors.aliyun.com/docker-ce/linux/ubuntu <span class="token variable"><span class="token variable">$(</span>lsb_release <span class="token parameter variable">-cs</span><span class="token variable">)</span></span> stable&quot;</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/apt/sources.list.d/docker.list <span class="token operator">&gt;</span> /dev/null</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment">#更新源</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">apt</span> update</span>
<span class="line"><span class="token function">sudo</span> <span class="token function">apt-get</span> update</span>
<span class="line"></span>
<span class="line"><span class="token comment">#安装最新版本的Docker</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> docker-ce docker-ce-cli containerd.io</span>
<span class="line"><span class="token comment">#等待安装完成</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="验证安装结果" tabindex="-1"><a class="header-anchor" href="#验证安装结果"><span>验证安装结果</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment">#查看Docker版本</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">docker</span> version</span>
<span class="line"></span>
<span class="line"><span class="token comment">#查看Docker运行状态</span></span>
<span class="line"><span class="token function">sudo</span> systemctl status <span class="token function">docker</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="安装docker命令补全工具" tabindex="-1"><a class="header-anchor" href="#安装docker命令补全工具"><span>安装docker命令补全工具</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> bash-completion</span>
<span class="line"></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">curl</span> <span class="token parameter variable">-L</span> https://raw.githubusercontent.com/docker/docker-ce/master/components/cli/contrib/completion/bash/docker <span class="token parameter variable">-o</span> /etc/bash_completion.d/docker.sh</span>
<span class="line"></span>
<span class="line"><span class="token builtin class-name">source</span> /etc/bash_completion.d/docker.sh</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="允许非root用户执行docker命令" tabindex="-1"><a class="header-anchor" href="#允许非root用户执行docker命令"><span>允许非Root用户执行docker命令</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># 添加docker用户组</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">groupadd</span> <span class="token function">docker</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 将当前用户添加到用户组</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">usermod</span> <span class="token parameter variable">-aG</span> <span class="token function">docker</span> <span class="token environment constant">$USER</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 使权限生效</span></span>
<span class="line">newgrp <span class="token function">docker</span> </span>
<span class="line"></span>
<span class="line"><span class="token comment"># 如果没有此行命令，你会发现，当你每次打开新的终端</span></span>
<span class="line"><span class="token comment"># 你都必须先执行一次 “newgrp docker” 命令</span></span>
<span class="line"><span class="token comment"># 否则当前用户还是不可以执行docker命令</span></span>
<span class="line"><span class="token builtin class-name">echo</span> <span class="token string">&quot;groupadd -f docker&quot;</span> <span class="token operator">&gt;&gt;</span>  ~/.bashrc</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="镜像加速" tabindex="-1"><a class="header-anchor" href="#镜像加速"><span>镜像加速</span></a></h2><p>在 /etc/docker/daemon.json 中增加</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">&quot;registry-mirrors&quot;: [</span>
<span class="line">    &quot;https://docker.m.daocloud.io&quot;</span>
<span class="line">  ]</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="安装前准备-1" tabindex="-1"><a class="header-anchor" href="#安装前准备-1"><span>安装前准备</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment">#安装前先卸载操作系统默认安装的docker，</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">apt-get</span> remove <span class="token function">docker</span> docker-engine docker.io containerd runc</span>
<span class="line"></span>
<span class="line"><span class="token comment">#安装必要支持</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> apt-transport-https ca-certificates <span class="token function">curl</span> software-properties-common gnupg lsb-release</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="开始安装-1" tabindex="-1"><a class="header-anchor" href="#开始安装-1"><span>开始安装</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment">#添加 Docker 官方 GPG key （可能国内现在访问会存在问题，除非配置代理）</span></span>
<span class="line"><span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> https://download.docker.com/linux/ubuntu/gpg <span class="token operator">|</span> <span class="token function">sudo</span> gpg <span class="token parameter variable">--dearmor</span> <span class="token parameter variable">-o</span> /usr/share/keyrings/docker-archive-keyring.gpg</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 阿里源（推荐使用阿里的gpg KEY）</span></span>
<span class="line"><span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg <span class="token operator">|</span> <span class="token function">sudo</span> gpg <span class="token parameter variable">--dearmor</span> <span class="token parameter variable">-o</span> /usr/share/keyrings/docker-archive-keyring.gpg</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment">#添加 apt 源:</span></span>
<span class="line"><span class="token comment">#Docker官方源</span></span>
<span class="line"><span class="token builtin class-name">echo</span> <span class="token string">&quot;deb [arch=<span class="token variable"><span class="token variable">$(</span>dpkg --print-architecture<span class="token variable">)</span></span> signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu <span class="token variable"><span class="token variable">$(</span>lsb_release <span class="token parameter variable">-cs</span><span class="token variable">)</span></span> stable&quot;</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/apt/sources.list.d/docker.list <span class="token operator">&gt;</span> /dev/null</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment">#阿里apt源</span></span>
<span class="line"><span class="token builtin class-name">echo</span> <span class="token string">&quot;deb [arch=<span class="token variable"><span class="token variable">$(</span>dpkg --print-architecture<span class="token variable">)</span></span> signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://mirrors.aliyun.com/docker-ce/linux/ubuntu <span class="token variable"><span class="token variable">$(</span>lsb_release <span class="token parameter variable">-cs</span><span class="token variable">)</span></span> stable&quot;</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/apt/sources.list.d/docker.list <span class="token operator">&gt;</span> /dev/null</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment">#更新源</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">apt</span> update</span>
<span class="line"><span class="token function">sudo</span> <span class="token function">apt-get</span> update</span>
<span class="line"></span>
<span class="line"><span class="token comment">#安装最新版本的Docker</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> docker-ce docker-ce-cli containerd.io</span>
<span class="line"><span class="token comment">#等待安装完成</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="验证安装结果-1" tabindex="-1"><a class="header-anchor" href="#验证安装结果-1"><span>验证安装结果</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment">#查看Docker版本</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">docker</span> version</span>
<span class="line"></span>
<span class="line"><span class="token comment">#查看Docker运行状态</span></span>
<span class="line"><span class="token function">sudo</span> systemctl status <span class="token function">docker</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="安装docker命令补全工具-1" tabindex="-1"><a class="header-anchor" href="#安装docker命令补全工具-1"><span>安装docker命令补全工具</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> bash-completion</span>
<span class="line"></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">curl</span> <span class="token parameter variable">-L</span> https://raw.githubusercontent.com/docker/docker-ce/master/components/cli/contrib/completion/bash/docker <span class="token parameter variable">-o</span> /etc/bash_completion.d/docker.sh</span>
<span class="line"></span>
<span class="line"><span class="token builtin class-name">source</span> /etc/bash_completion.d/docker.sh</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,21)]))}const r=n(i,[["render",c],["__file","ubuntuanzhuangdocker.html.vue"]]),o=JSON.parse('{"path":"/blogs/ops/docker/ubuntuanzhuangdocker.html","title":"ubuntu安装docker","lang":"en-US","frontmatter":{"title":"ubuntu安装docker","date":"2024/12/14"},"headers":[{"level":2,"title":"安装前准备","slug":"安装前准备","link":"#安装前准备","children":[]},{"level":2,"title":"开始安装","slug":"开始安装","link":"#开始安装","children":[]},{"level":2,"title":"验证安装结果","slug":"验证安装结果","link":"#验证安装结果","children":[]},{"level":2,"title":"安装docker命令补全工具","slug":"安装docker命令补全工具","link":"#安装docker命令补全工具","children":[]},{"level":2,"title":"允许非Root用户执行docker命令","slug":"允许非root用户执行docker命令","link":"#允许非root用户执行docker命令","children":[]},{"level":2,"title":"镜像加速","slug":"镜像加速","link":"#镜像加速","children":[]},{"level":2,"title":"安装前准备","slug":"安装前准备-1","link":"#安装前准备-1","children":[]},{"level":2,"title":"开始安装","slug":"开始安装-1","link":"#开始安装-1","children":[]},{"level":2,"title":"验证安装结果","slug":"验证安装结果-1","link":"#验证安装结果-1","children":[]},{"level":2,"title":"安装docker命令补全工具","slug":"安装docker命令补全工具-1","link":"#安装docker命令补全工具-1","children":[]}],"git":{"createdTime":1734079710000,"updatedTime":1734108247000,"contributors":[{"name":"makainb","email":"makai325@gmail.com","commits":2}]},"filePathRelative":"blogs/ops/docker/ubuntu安装docker.md"}');export{r as comp,o as data};
